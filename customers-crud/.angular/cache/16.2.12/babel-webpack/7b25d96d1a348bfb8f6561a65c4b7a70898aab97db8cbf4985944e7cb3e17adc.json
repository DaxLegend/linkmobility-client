{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/http-requests/http-requests.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"primeng/button\";\nimport * as i4 from \"primeng/api\";\nimport * as i5 from \"primeng/inputtext\";\nimport * as i6 from \"primeng/table\";\nimport * as i7 from \"@angular/forms\";\nfunction CustomersComponent_div_12_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 16);\n    i0.ɵɵtext(2, \"Company Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\", 16);\n    i0.ɵɵtext(4, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 16);\n    i0.ɵɵtext(6, \"Subscription State\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 16);\n    i0.ɵɵtext(8, \"Number Of Invoices\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CustomersComponent_div_12_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const customer_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r3.companyName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", customer_r3.address, \", \", customer_r3.state, \", \", customer_r3.country, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r3.subscriptionState);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r3.numberOfInvoices);\n  }\n}\nconst _c0 = function () {\n  return {\n    \"min-width\": \"50rem\"\n  };\n};\nfunction CustomersComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"p-table\", 13);\n    i0.ɵɵlistener(\"onPage\", function CustomersComponent_div_12_Template_p_table_onPage_1_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.pageChange($event));\n    })(\"selectionChange\", function CustomersComponent_div_12_Template_p_table_selectionChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.selectedCustomer = $event);\n    });\n    i0.ɵɵtemplate(2, CustomersComponent_div_12_ng_template_2_Template, 9, 0, \"ng-template\", 14);\n    i0.ɵɵtemplate(3, CustomersComponent_div_12_ng_template_3_Template, 9, 6, \"ng-template\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r0.customers)(\"loading\", ctx_r0.loading)(\"paginator\", true)(\"rows\", 12)(\"totalRecords\", ctx_r0.totalRows)(\"selection\", ctx_r0.selectedCustomer)(\"showCurrentPageReport\", true)(\"tableStyle\", i0.ɵɵpureFunction0(8, _c0));\n  }\n}\nlet CustomersComponent = /*#__PURE__*/(() => {\n  class CustomersComponent {\n    constructor(http_requests_service) {\n      this.http_requests_service = http_requests_service;\n      this.customers = [];\n      this.loading = true;\n      this.subs = [];\n      this.getCustomers(1, 24);\n    }\n    ngOnDestroy() {\n      this.subs.forEach(sub => {\n        sub.unsubscribe();\n      });\n      this.subs = [];\n    }\n    filterTable() {}\n    pageChange(event) {\n      this.loading = true;\n      const timeout = setTimeout(() => {\n        const currentPage = event.first / event.rows + 1;\n        this.getCustomers(currentPage, event.rows);\n        clearTimeout(timeout);\n      }, 1000);\n    }\n    addCustomerPopup() {}\n    editCustomerPopup() {}\n    deleteCustomer() {\n      this.subs.push(this.http_requests_service.deleteCustomer(this.selectedCustomer.id).subscribe({\n        next: value => {\n          this.customers = [];\n          this.getCustomers(1, 24);\n          this.loading = false;\n        },\n        error: err => {\n          console.error(err);\n          this.loading = false;\n        }\n      }));\n    }\n    viewInvoicesPopup() {}\n    getCustomers(from, rows) {\n      //this.loadTable = false;\n      this.subs.push(this.http_requests_service.getCustomers(from, rows).subscribe({\n        next: values => {\n          values.customers?.forEach(value => {\n            this.customers.push(value);\n          });\n          this.totalRows = values.total;\n          console.log(this.totalRows);\n          this.loading = false;\n          if (!this.loadTable) this.loadTable = true;\n          this.totalRows = values.total;\n        },\n        error: err => {\n          console.error(err);\n          this.loading = false;\n        }\n      }));\n    }\n    static #_ = this.ɵfac = function CustomersComponent_Factory(t) {\n      return new (t || CustomersComponent)(i0.ɵɵdirectiveInject(i1.HttpRequestsService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CustomersComponent,\n      selectors: [[\"app-customers\"]],\n      decls: 13,\n      vars: 5,\n      consts: [[1, \"topBar\"], [1, \"buttonsContainer\"], [\"type\", \"button\", \"icon\", \"pi pi-plus\", \"styleClass\", \"p-button-text\", \"title\", \"Add a new customer\", 3, \"onClick\"], [\"type\", \"button\", \"icon\", \"pi pi-pencil\", \"styleClass\", \"p-button-text\", \"title\", \"Edit selected customer\", 3, \"disabled\", \"onClick\"], [\"type\", \"button\", \"icon\", \"pi pi-trash\", \"styleClass\", \"p-button-text\", \"title\", \"Delete selected customer\", 3, \"disabled\", \"onClick\"], [\"type\", \"button\", \"icon\", \"pi pi-file\", \"styleClass\", \"p-button-text\", \"title\", \"Show invoices of the selected customer\", 3, \"disabled\", \"onClick\"], [1, \"searchBarContainer\"], [1, \"searchBar\"], [1, \"p-input-icon-left\"], [1, \"pi\", \"pi-search\"], [\"type\", \"text\", \"pInputText\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"tableContainer\", 4, \"ngIf\"], [1, \"tableContainer\"], [\"styleClass\", \"p-datatable-striped\", \"selectionMode\", \"single\", \"dataKey\", \"id\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 3, \"value\", \"loading\", \"paginator\", \"rows\", \"totalRecords\", \"selection\", \"showCurrentPageReport\", \"tableStyle\", \"onPage\", \"selectionChange\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [2, \"width\", \"25%\"]],\n      template: function CustomersComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\")(1, \"div\", 0)(2, \"div\", 1)(3, \"p-button\", 2);\n          i0.ɵɵlistener(\"onClick\", function CustomersComponent_Template_p_button_onClick_3_listener() {\n            return ctx.addCustomerPopup();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"p-button\", 3);\n          i0.ɵɵlistener(\"onClick\", function CustomersComponent_Template_p_button_onClick_4_listener() {\n            return ctx.editCustomerPopup();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p-button\", 4);\n          i0.ɵɵlistener(\"onClick\", function CustomersComponent_Template_p_button_onClick_5_listener() {\n            return ctx.deleteCustomer();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"p-button\", 5);\n          i0.ɵɵlistener(\"onClick\", function CustomersComponent_Template_p_button_onClick_6_listener() {\n            return ctx.viewInvoicesPopup();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"div\", 6)(8, \"div\", 7)(9, \"span\", 8);\n          i0.ɵɵelement(10, \"i\", 9);\n          i0.ɵɵelementStart(11, \"input\", 10);\n          i0.ɵɵlistener(\"ngModelChange\", function CustomersComponent_Template_input_ngModelChange_11_listener($event) {\n            return ctx.searchString = $event;\n          })(\"ngModelChange\", function CustomersComponent_Template_input_ngModelChange_11_listener() {\n            return ctx.filterTable();\n          });\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵtemplate(12, CustomersComponent_div_12_Template, 4, 9, \"div\", 11);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", !ctx.selectedCustomer);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"disabled\", !ctx.selectedCustomer);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"disabled\", !ctx.selectedCustomer);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.searchString);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loadTable);\n        }\n      },\n      dependencies: [i2.NgIf, i3.Button, i4.PrimeTemplate, i5.InputText, i6.Table, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel],\n      styles: [\".searchBar[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;justify-content:center;align-items:center}.topBar[_ngcontent-%COMP%]{display:flex;height:20%;width:100%;flex-direction:row;padding-bottom:2%;padding-top:2%}.buttonsContainer[_ngcontent-%COMP%]{display:flex;width:50%;flex-direction:row;-moz-column-gap:2%;column-gap:2%;justify-content:center}.searchBarContainer[_ngcontent-%COMP%]{display:flex;width:50%;align-content:center;align-items:center;justify-content:center}\"]\n    });\n  }\n  return CustomersComponent;\n})();\nexport { CustomersComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}